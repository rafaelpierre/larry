{"ast":null,"code":"import _toConsumableArray from\"/home/rafael/projects/larry/ui/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/rafael/projects/larry/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,setState}from\"react\";import axios from\"axios\";import\"./style.css\";import\"./pretty-checkbox.min.css\";import Messages from\"./Messages\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chat=function Chat(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),responses=_useState2[0],setResponses=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chatHistoryIds=_useState4[0],setChatHistoryIds=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),currentMessage=_useState6[0],setCurrentMessage=_useState6[1];var handleMessageSubmit=function handleMessageSubmit(message){var data={question:message,chat_history_ids:chatHistoryIds.length>0?[chatHistoryIds]:[]};console.log(\"data: \"+data);axios.post('/generate',data).then(function(response){var responseData={text:response.data[\"answer\"],isBot:true};setResponses(function(responses){return[].concat(_toConsumableArray(responses),[responseData]);});setChatHistoryIds(function(chatHistoryIds){return response.data[\"chat_history_ids\"];});console.log(\"response: \"+response);}).catch(function(error){console.log(\"Error: \",error);});};var handleMessageChange=function handleMessageChange(event){setCurrentMessage(event.target.value);};var handleSubmit=function handleSubmit(event){var message={text:currentMessage,isBot:false};if(event.key==\"Enter\"){setResponses(function(responses){return[].concat(_toConsumableArray(responses),[message]);});handleMessageSubmit(message.text);setCurrentMessage(\"\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"chatSection\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"botContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"messagesContainer\",children:/*#__PURE__*/_jsx(Messages,{messages:responses})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputSection\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:currentMessage,onChange:handleMessageChange,onKeyDown:handleSubmit,placeholder:\"Say something...\",className:\"messageInputField\"}),/*#__PURE__*/_jsx(\"div\",{onClick:handleSubmit,children:/*#__PURE__*/_jsx(\"svg\",{style:{marginRight:\"10px\"},id:\"Capa_1\",enableBackground:\"new 0 0 512.004 512.004\",height:\"25\",viewBox:\"0 0 512.004 512.004\",width:\"25\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"path\",{d:\"m511.35 52.881-122 400c-3.044 9.919-14.974 13.828-23.29 7.67-7.717-5.727-203.749-151.217-214.37-159.1l-142.1-54.96c-5.79-2.24-9.6-7.81-9.59-14.02.01-6.21 3.85-11.77 9.65-13.98l482-184c5.824-2.232 12.488-.626 16.67 4.17 3.37 3.87 4.55 9.24 3.03 14.22z\",fill:\"#94dfda\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m511.35 52.881-122 400c-3.044 9.919-14.974 13.828-23.29 7.67l-190.05-141.05 332.31-280.84c3.37 3.87 4.55 9.24 3.03 14.22z\",fill:\"#61a7c5\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m507.89 58.821-271.49 286.4-63 125.03c-3.16 6.246-10.188 9.453-16.87 7.84-6.76-1.6-11.53-7.64-11.53-14.59v-175.3c0-4.86 2.35-9.41 6.31-12.23l337-239.69c6.29-4.48 14.95-3.45 20.01 2.38 5.07 5.83 4.88 14.56-.43 20.16z\",fill:\"#eef4ff\"}),/*#__PURE__*/_jsx(\"path\",{d:\"m507.89 58.821-271.49 286.4-63 125.03c-3.16 6.246-10.188 9.453-16.87 7.84-6.76-1.6-11.53-7.64-11.53-14.59l31.01-144 332.31-280.84c5.07 5.83 4.88 14.56-.43 20.16z\",fill:\"#d9e6fc\"})]})})})]})]})});};export default Chat;","map":{"version":3,"names":["React","useState","setState","axios","Messages","jsx","_jsx","jsxs","_jsxs","Chat","props","_useState","_useState2","_slicedToArray","responses","setResponses","_useState3","_useState4","chatHistoryIds","setChatHistoryIds","_useState5","_useState6","currentMessage","setCurrentMessage","handleMessageSubmit","message","data","question","chat_history_ids","length","console","log","post","then","response","responseData","text","isBot","concat","_toConsumableArray","catch","error","handleMessageChange","event","target","value","handleSubmit","key","className","children","messages","type","onChange","onKeyDown","placeholder","onClick","style","marginRight","id","enableBackground","height","viewBox","width","xmlns","d","fill"],"sources":["/home/rafael/projects/larry/ui/src/Chat.js"],"sourcesContent":["import React, { useState, setState } from \"react\";\nimport axios from \"axios\";\n\nimport \"./style.css\";\nimport \"./pretty-checkbox.min.css\";\nimport Messages from \"./Messages\";\n\n\nconst Chat = props => {\n  const [responses, setResponses] = useState([]);\n  const [chatHistoryIds, setChatHistoryIds] = useState([]);\n  const [currentMessage, setCurrentMessage] = useState(\"\");\n\n\n  const handleMessageSubmit = message => {\n    const data = {\n        question: message,\n        chat_history_ids: (chatHistoryIds.length > 0 ? [chatHistoryIds] : [])\n    };\n    console.log(\"data: \" + data);\n\n    axios\n      .post('/generate', data)\n      .then(response => {\n        const responseData = {\n          text: response.data[\"answer\"],\n          isBot: true\n        };\n        setResponses(responses => [...responses, responseData]);\n        setChatHistoryIds(chatHistoryIds => response.data[\"chat_history_ids\"]);\n        console.log(\"response: \" + response);\n      })\n      .catch(error => {\n        console.log(\"Error: \", error);\n      });\n  };\n\n  const handleMessageChange = event => {\n    setCurrentMessage(event.target.value);\n  };\n\n  const handleSubmit = event => {\n    const message = {\n      text: currentMessage,\n      isBot: false\n    };\n    if (event.key == \"Enter\") {\n      setResponses(responses => [...responses, message]);\n      handleMessageSubmit(message.text);\n      setCurrentMessage(\"\");\n    }\n    \n  };\n\n  return (\n    <div className=\"chatSection\">\n      <div className=\"botContainer\">\n        <div className=\"messagesContainer\">\n          <Messages messages={responses} />\n        </div>\n        <div className=\"inputSection\">\n          <input\n            type=\"text\"\n            value={currentMessage}\n            onChange={handleMessageChange}\n            onKeyDown={handleSubmit}\n            placeholder=\"Say something...\"\n            className=\"messageInputField\"\n          />\n          <div onClick={handleSubmit}>\n            <svg\n              style={{ marginRight: \"10px\" }}\n              id=\"Capa_1\"\n              enableBackground=\"new 0 0 512.004 512.004\"\n              height=\"25\"\n              viewBox=\"0 0 512.004 512.004\"\n              width=\"25\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <g>\n                <path\n                  d=\"m511.35 52.881-122 400c-3.044 9.919-14.974 13.828-23.29 7.67-7.717-5.727-203.749-151.217-214.37-159.1l-142.1-54.96c-5.79-2.24-9.6-7.81-9.59-14.02.01-6.21 3.85-11.77 9.65-13.98l482-184c5.824-2.232 12.488-.626 16.67 4.17 3.37 3.87 4.55 9.24 3.03 14.22z\"\n                  fill=\"#94dfda\"\n                />\n                <path\n                  d=\"m511.35 52.881-122 400c-3.044 9.919-14.974 13.828-23.29 7.67l-190.05-141.05 332.31-280.84c3.37 3.87 4.55 9.24 3.03 14.22z\"\n                  fill=\"#61a7c5\"\n                />\n                <path\n                  d=\"m507.89 58.821-271.49 286.4-63 125.03c-3.16 6.246-10.188 9.453-16.87 7.84-6.76-1.6-11.53-7.64-11.53-14.59v-175.3c0-4.86 2.35-9.41 6.31-12.23l337-239.69c6.29-4.48 14.95-3.45 20.01 2.38 5.07 5.83 4.88 14.56-.43 20.16z\"\n                  fill=\"#eef4ff\"\n                />\n                <path\n                  d=\"m507.89 58.821-271.49 286.4-63 125.03c-3.16 6.246-10.188 9.453-16.87 7.84-6.76-1.6-11.53-7.64-11.53-14.59l31.01-144 332.31-280.84c5.07 5.83 4.88 14.56-.43 20.16z\"\n                  fill=\"#d9e6fc\"\n                />\n              </g>\n            </svg>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}